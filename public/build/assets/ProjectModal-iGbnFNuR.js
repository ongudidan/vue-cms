import{l as E,r as _,m as M,n as x,c as d,d as n,b as e,t as u,a as v,u as s,j as w,e as A,f as p,v as h,F as B,p as D,q as F,o as a}from"./app-BMWTz2XK.js";import{X as k}from"./x-DWFVe79P.js";import{U as N}from"./upload-pE1LLDIh.js";import"./createLucideIcon-B05Kbpo6.js";const q={class:"w-full max-w-3xl rounded-xl border border-sidebar-border bg-card shadow-xl overflow-hidden"},I={class:"flex items-center justify-between border-b border-sidebar-border px-6 py-4"},L={class:"text-xl font-semibold text-foreground"},R={class:"space-y-4"},T={class:"flex items-center gap-4"},z={class:"flex-1"},$={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},O={class:"flex items-center gap-4"},X={class:"flex-1"},G={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},H={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},J={class:"space-y-2"},K={key:0,class:"grid grid-cols-2 gap-2"},P=["src","alt"],Q=["title"],W={key:1,for:"images",class:"flex cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-sidebar-border bg-muted/30 px-4 py-6 text-sm text-muted-foreground transition-colors hover:border-primary hover:bg-muted/50"},Y={key:2,class:"relative rounded-lg border border-sidebar-border p-2"},Z=["src"],ee={key:3,class:"text-xs text-muted-foreground"},te={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},re={class:"flex items-center gap-3"},se={class:"mt-5 flex justify-end gap-3"},oe=["disabled"],le=["disabled"],ue={__name:"ProjectModal",props:{show:{type:Boolean,required:!0},project:{type:Object,default:null}},emits:["close"],setup(y,{emit:j}){const m=y,g=j,f=E(()=>!!m.project),i=_(null),c=_([]),t=M({title:"",slug:"",details:"",images:null,active:!0});x(()=>m.project,l=>{l?(t.title=l.title,t.slug=l.slug,t.details=l.details||"",t.active=l.active,t.images=null,i.value=null,c.value=l.media||[]):(t.reset(),i.value=null,c.value=[])},{immediate:!0}),x(()=>m.show,l=>{l||(t.reset(),t.clearErrors(),i.value=null)}),x(()=>t.title,l=>{t.slug=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")});const C=l=>{const r=l.target.files;if(r&&r.length>0){t.images=Array.from(r);const o=new FileReader;o.onload=V=>{i.value=V.target?.result},o.readAsDataURL(r[0])}},U=()=>{t.images=null,i.value=null},S=()=>{f.value&&m.project?t.put(`/admin/projects/${m.project.id}`,{preserveScroll:!0,onSuccess:()=>g("close")}):t.post("/admin/projects",{preserveScroll:!0,onSuccess:()=>g("close")})},b=()=>g("close");return(l,r)=>y.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/50 p-6",onClick:w(b,["self"])},[e("div",q,[e("div",I,[e("h2",L,u(f.value?"Edit Project":"Create Project"),1),e("button",{onClick:b,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[v(s(k),{class:"h-5 w-5"})])]),e("form",{onSubmit:w(S,["prevent"]),class:"p-6 max-h-[75vh] overflow-y-auto"},[e("div",R,[e("div",T,[r[4]||(r[4]=e("label",{for:"title",class:"w-24 text-sm font-medium text-foreground"},[A(" Title "),e("span",{class:"text-red-500"},"*")],-1)),e("div",z,[p(e("input",{id:"title","onUpdate:modelValue":r[0]||(r[0]=o=>s(t).title=o),type:"text",required:"",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter project title"},null,512),[[h,s(t).title]]),s(t).errors.title?(a(),d("p",$,u(s(t).errors.title),1)):n("",!0)])]),e("div",O,[r[6]||(r[6]=e("label",{for:"slug",class:"w-24 text-sm font-medium text-foreground"}," Slug ",-1)),e("div",X,[p(e("input",{id:"slug","onUpdate:modelValue":r[1]||(r[1]=o=>s(t).slug=o),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"auto-generated-slug"},null,512),[[h,s(t).slug]]),r[5]||(r[5]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Auto-generated from title if left empty ",-1)),s(t).errors.slug?(a(),d("p",G,u(s(t).errors.slug),1)):n("",!0)])]),e("div",null,[r[7]||(r[7]=e("label",{for:"details",class:"mb-1.5 block text-sm font-medium text-foreground"}," Details ",-1)),p(e("textarea",{id:"details","onUpdate:modelValue":r[2]||(r[2]=o=>s(t).details=o),rows:"2",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter project description"},null,512),[[h,s(t).details]]),s(t).errors.details?(a(),d("p",H,u(s(t).errors.details),1)):n("",!0)]),e("div",null,[r[8]||(r[8]=e("label",{for:"images",class:"mb-1.5 block text-sm font-medium text-foreground"}," Images ",-1)),e("div",J,[c.value.length>0&&!i.value?(a(),d("div",K,[(a(!0),d(B,null,D(c.value,o=>(a(),d("div",{key:o.id,class:"relative rounded-lg border border-sidebar-border p-2"},[e("img",{src:o.url,alt:o.file_name,class:"h-20 w-full rounded object-cover"},null,8,P),e("p",{class:"mt-1 truncate text-xs text-muted-foreground",title:o.file_name},u(o.file_name),9,Q)]))),128))])):n("",!0),i.value?n("",!0):(a(),d("label",W,[v(s(N),{class:"h-4 w-4"}),e("span",null,u(c.value.length>0?"Replace images":"Click to upload images"),1),e("input",{id:"images",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:C},null,32)])),i.value?(a(),d("div",Y,[e("img",{src:i.value,alt:"Preview",class:"h-24 w-full rounded object-cover"},null,8,Z),e("button",{type:"button",onClick:U,class:"absolute right-3 top-3 rounded-full bg-red-600 p-1 text-white shadow-lg transition-colors hover:bg-red-700"},[v(s(k),{class:"h-3 w-3"})])])):n("",!0),c.value.length>0&&!i.value?(a(),d("p",ee," Uploading new images will replace all existing images ")):n("",!0)]),s(t).errors.images?(a(),d("p",te,u(s(t).errors.images),1)):n("",!0)]),e("div",re,[p(e("input",{id:"active","onUpdate:modelValue":r[3]||(r[3]=o=>s(t).active=o),type:"checkbox",class:"h-4 w-4 rounded border-sidebar-border text-primary focus:ring-2 focus:ring-primary/20"},null,512),[[F,s(t).active]]),r[9]||(r[9]=e("label",{for:"active",class:"text-sm font-medium text-foreground"}," Active ",-1))])]),e("div",se,[e("button",{type:"button",onClick:b,class:"rounded-lg border border-sidebar-border px-4 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-muted",disabled:s(t).processing}," Cancel ",8,oe),e("button",{type:"submit",class:"rounded-lg bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",disabled:s(t).processing},u(s(t).processing?"Saving...":f.value?"Update":"Create"),9,le)])],32)])])):n("",!0)}};export{ue as default};
