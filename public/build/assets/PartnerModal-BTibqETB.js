import{l as V,r as x,m as E,n as h,c as d,d as i,b as e,t as c,a as f,u as s,j as y,f as _,e as M,v as N,F as B,p as F,q,o as n}from"./app-BMWTz2XK.js";import{X as w}from"./x-DWFVe79P.js";import{U as A}from"./upload-pE1LLDIh.js";import"./createLucideIcon-B05Kbpo6.js";const D={class:"w-full max-w-2xl rounded-xl border border-sidebar-border bg-card shadow-xl overflow-hidden"},L={class:"flex items-center justify-between border-b border-sidebar-border px-6 py-4"},R={class:"text-xl font-semibold text-foreground"},I={class:"space-y-4"},P={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},T={class:"space-y-2"},z={key:0,class:"grid grid-cols-2 gap-2"},O=["src","alt"],X=["title"],$={key:1,for:"images",class:"flex cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-sidebar-border bg-muted/30 px-4 py-6 text-sm text-muted-foreground transition-colors hover:border-primary hover:bg-muted/50"},G={key:2,class:"relative rounded-lg border border-sidebar-border p-2"},H=["src"],J={key:3,class:"text-xs text-muted-foreground"},K={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},Q={class:"flex items-center gap-3"},W={class:"mt-5 flex justify-end gap-3"},Y=["disabled"],Z=["disabled"],oe={__name:"PartnerModal",props:{show:{type:Boolean,required:!0},partner:{type:Object,default:null}},emits:["close"],setup(v,{emit:k}){const m=v,p=k,g=V(()=>!!m.partner),l=x(null),u=x([]),t=E({name:"",images:null,active:!0});h(()=>m.partner,a=>{a?(t.name=a.name,t.active=a.active,t.images=null,l.value=null,u.value=a.media||[]):(t.reset(),l.value=null,u.value=[])},{immediate:!0}),h(()=>m.show,a=>{a||(t.reset(),t.clearErrors(),l.value=null)});const C=a=>{const r=a.target.files;if(r&&r.length>0){t.images=Array.from(r);const o=new FileReader;o.onload=S=>{l.value=S.target?.result},o.readAsDataURL(r[0])}},j=()=>{t.images=null,l.value=null},U=()=>{g.value&&m.partner?t.put(`/admin/partners/${m.partner.id}`,{preserveScroll:!0,onSuccess:()=>p("close")}):t.post("/admin/partners",{preserveScroll:!0,onSuccess:()=>p("close")})},b=()=>p("close");return(a,r)=>v.show?(n(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/50 p-6",onClick:y(b,["self"])},[e("div",D,[e("div",L,[e("h2",R,c(g.value?"Edit Partner":"Create Partner"),1),e("button",{onClick:b,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[f(s(w),{class:"h-5 w-5"})])]),e("form",{onSubmit:y(U,["prevent"]),class:"p-6"},[e("div",I,[e("div",null,[r[2]||(r[2]=e("label",{for:"name",class:"mb-1.5 block text-sm font-medium text-foreground"},[M(" Name "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"name","onUpdate:modelValue":r[0]||(r[0]=o=>s(t).name=o),type:"text",required:"",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter partner name"},null,512),[[N,s(t).name]]),s(t).errors.name?(n(),d("p",P,c(s(t).errors.name),1)):i("",!0)]),e("div",null,[r[3]||(r[3]=e("label",{for:"images",class:"mb-1.5 block text-sm font-medium text-foreground"}," Logo ",-1)),e("div",T,[u.value.length>0&&!l.value?(n(),d("div",z,[(n(!0),d(B,null,F(u.value,o=>(n(),d("div",{key:o.id,class:"relative rounded-lg border border-sidebar-border p-2"},[e("img",{src:o.url,alt:o.file_name,class:"h-20 w-full rounded object-cover"},null,8,O),e("p",{class:"mt-1 truncate text-xs text-muted-foreground",title:o.file_name},c(o.file_name),9,X)]))),128))])):i("",!0),l.value?i("",!0):(n(),d("label",$,[f(s(A),{class:"h-4 w-4"}),e("span",null,c(u.value.length>0?"Replace logo":"Click to upload logo"),1),e("input",{id:"images",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:C},null,32)])),l.value?(n(),d("div",G,[e("img",{src:l.value,alt:"Preview",class:"h-24 w-full rounded object-cover"},null,8,H),e("button",{type:"button",onClick:j,class:"absolute right-3 top-3 rounded-full bg-red-600 p-1 text-white shadow-lg transition-colors hover:bg-red-700"},[f(s(w),{class:"h-3 w-3"})])])):i("",!0),u.value.length>0&&!l.value?(n(),d("p",J," Uploading new images will replace all existing images ")):i("",!0)]),s(t).errors.images?(n(),d("p",K,c(s(t).errors.images),1)):i("",!0)]),e("div",Q,[_(e("input",{id:"active","onUpdate:modelValue":r[1]||(r[1]=o=>s(t).active=o),type:"checkbox",class:"h-4 w-4 rounded border-sidebar-border text-primary focus:ring-2 focus:ring-primary/20"},null,512),[[q,s(t).active]]),r[4]||(r[4]=e("label",{for:"active",class:"text-sm font-medium text-foreground"}," Active ",-1))])]),e("div",W,[e("button",{type:"button",onClick:b,class:"rounded-lg border border-sidebar-border px-4 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-muted",disabled:s(t).processing}," Cancel ",8,Y),e("button",{type:"submit",class:"rounded-lg bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",disabled:s(t).processing},c(s(t).processing?"Saving...":g.value?"Update":"Create"),9,Z)])],32)])])):i("",!0)}};export{oe as default};
