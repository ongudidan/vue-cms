import{l as D,r as k,m as M,n as v,c as d,d as n,b as e,t as u,a as y,u as s,j as w,e as A,f as m,v as p,F as B,p as F,q as N,o as a}from"./app-BMWTz2XK.js";import{X as _}from"./x-DWFVe79P.js";import{U as T}from"./upload-pE1LLDIh.js";import"./createLucideIcon-B05Kbpo6.js";const q={class:"w-full max-w-3xl rounded-xl border border-sidebar-border bg-card shadow-xl overflow-hidden"},I={class:"flex items-center justify-between border-b border-sidebar-border px-6 py-4"},L={class:"text-xl font-semibold text-foreground"},R={class:"space-y-4"},z={class:"flex items-center gap-4"},P={class:"flex-1"},$={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},E={class:"flex items-center gap-4"},O={class:"flex-1"},X={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},G={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},H={class:"space-y-2"},J={key:0,class:"grid grid-cols-2 gap-2"},K=["src","alt"],Q=["title"],W={key:1,for:"images",class:"flex cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-sidebar-border bg-muted/30 px-4 py-6 text-sm text-muted-foreground transition-colors hover:border-primary hover:bg-muted/50"},Y={key:2,class:"relative rounded-lg border border-sidebar-border p-2"},Z=["src"],ee={key:3,class:"text-xs text-muted-foreground"},te={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},re={class:"flex items-center gap-3"},se={class:"mt-5 flex justify-end gap-3"},oe=["disabled"],le=["disabled"],ue={__name:"EventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null}},emits:["close"],setup(h,{emit:C}){const g=h,b=C,f=D(()=>!!g.event),i=k(null),c=k([]),t=M({title:"",slug:"",details:"",tags:"",date:"",images:null,active:!0});v(()=>g.event,l=>{l?(t.title=l.title,t.slug=l.slug,t.details=l.details||"",t.tags=l.tags?l.tags.join(", "):"",t.date=l.date||"",t.active=l.active,t.images=null,i.value=null,c.value=l.media||[]):(t.reset(),i.value=null,c.value=[])},{immediate:!0}),v(()=>g.show,l=>{l||(t.reset(),t.clearErrors(),i.value=null)}),v(()=>t.title,l=>{f.value||(t.slug=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const U=l=>{const r=l.target.files;if(r&&r.length>0){t.images=Array.from(r);const o=new FileReader;o.onload=S=>{i.value=S.target?.result},o.readAsDataURL(r[0])}},V=()=>{t.images=null,i.value=null},j=()=>{f.value&&g.event?t.put(`/admin/events/${g.event.id}`,{preserveScroll:!0,onSuccess:()=>b("close")}):t.post("/admin/events",{preserveScroll:!0,onSuccess:()=>b("close")})},x=()=>b("close");return(l,r)=>h.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/50 p-6",onClick:w(x,["self"])},[e("div",q,[e("div",I,[e("h2",L,u(f.value?"Edit Event":"Create Event"),1),e("button",{onClick:x,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[y(s(_),{class:"h-5 w-5"})])]),e("form",{onSubmit:w(j,["prevent"]),class:"p-6 max-h-[75vh] overflow-y-auto"},[e("div",R,[e("div",z,[r[6]||(r[6]=e("label",{for:"title",class:"w-24 text-sm font-medium text-foreground"},[A(" Title "),e("span",{class:"text-red-500"},"*")],-1)),e("div",P,[m(e("input",{id:"title","onUpdate:modelValue":r[0]||(r[0]=o=>s(t).title=o),type:"text",required:"",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter event title"},null,512),[[p,s(t).title]]),s(t).errors.title?(a(),d("p",$,u(s(t).errors.title),1)):n("",!0)])]),e("div",E,[r[8]||(r[8]=e("label",{for:"slug",class:"w-24 text-sm font-medium text-foreground"}," Slug ",-1)),e("div",O,[m(e("input",{id:"slug","onUpdate:modelValue":r[1]||(r[1]=o=>s(t).slug=o),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"auto-generated-slug"},null,512),[[p,s(t).slug]]),r[7]||(r[7]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Auto-generated from title if left empty ",-1)),s(t).errors.slug?(a(),d("p",X,u(s(t).errors.slug),1)):n("",!0)])]),e("div",null,[r[9]||(r[9]=e("label",{for:"tags",class:"mb-1.5 block text-sm font-medium text-foreground"}," Tags ",-1)),m(e("input",{id:"tags","onUpdate:modelValue":r[2]||(r[2]=o=>s(t).tags=o),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"tag1, tag2, tag3"},null,512),[[p,s(t).tags]]),r[10]||(r[10]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Separate tags with commas ",-1))]),e("div",null,[r[11]||(r[11]=e("label",{for:"date",class:"mb-1.5 block text-sm font-medium text-foreground"}," Date ",-1)),m(e("input",{id:"date","onUpdate:modelValue":r[3]||(r[3]=o=>s(t).date=o),type:"date",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[p,s(t).date]])]),e("div",null,[r[12]||(r[12]=e("label",{for:"details",class:"mb-1.5 block text-sm font-medium text-foreground"}," Details ",-1)),m(e("textarea",{id:"details","onUpdate:modelValue":r[4]||(r[4]=o=>s(t).details=o),rows:"2",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter event description"},null,512),[[p,s(t).details]]),s(t).errors.details?(a(),d("p",G,u(s(t).errors.details),1)):n("",!0)]),e("div",null,[r[13]||(r[13]=e("label",{for:"images",class:"mb-1.5 block text-sm font-medium text-foreground"}," Images ",-1)),e("div",H,[c.value.length>0&&!i.value?(a(),d("div",J,[(a(!0),d(B,null,F(c.value,o=>(a(),d("div",{key:o.id,class:"relative rounded-lg border border-sidebar-border p-2"},[e("img",{src:o.url,alt:o.file_name,class:"h-20 w-full rounded object-cover"},null,8,K),e("p",{class:"mt-1 truncate text-xs text-muted-foreground",title:o.file_name},u(o.file_name),9,Q)]))),128))])):n("",!0),i.value?n("",!0):(a(),d("label",W,[y(s(T),{class:"h-4 w-4"}),e("span",null,u(c.value.length>0?"Replace images":"Click to upload images"),1),e("input",{id:"images",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:U},null,32)])),i.value?(a(),d("div",Y,[e("img",{src:i.value,alt:"Preview",class:"h-24 w-full rounded object-cover"},null,8,Z),e("button",{type:"button",onClick:V,class:"absolute right-3 top-3 rounded-full bg-red-600 p-1 text-white shadow-lg transition-colors hover:bg-red-700"},[y(s(_),{class:"h-3 w-3"})])])):n("",!0),c.value.length>0&&!i.value?(a(),d("p",ee," Uploading new images will replace all existing images ")):n("",!0)]),s(t).errors.images?(a(),d("p",te,u(s(t).errors.images),1)):n("",!0)]),e("div",re,[m(e("input",{id:"active","onUpdate:modelValue":r[5]||(r[5]=o=>s(t).active=o),type:"checkbox",class:"h-4 w-4 rounded border-sidebar-border text-primary focus:ring-2 focus:ring-primary/20"},null,512),[[N,s(t).active]]),r[14]||(r[14]=e("label",{for:"active",class:"text-sm font-medium text-foreground"}," Active ",-1))])]),e("div",se,[e("button",{type:"button",onClick:x,class:"rounded-lg border border-sidebar-border px-4 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-muted",disabled:s(t).processing}," Cancel ",8,oe),e("button",{type:"submit",class:"rounded-lg bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",disabled:s(t).processing},u(s(t).processing?"Saving...":f.value?"Update":"Create"),9,le)])],32)])])):n("",!0)}};export{ue as default};
