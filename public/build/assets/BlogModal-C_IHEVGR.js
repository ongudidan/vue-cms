import{l as E,r as k,m as D,n as v,c as d,d as n,b as e,t as u,a as y,u as o,j as w,e as M,f as g,v as p,F as A,p as F,q as N,o as a}from"./app-B4dY5ODa.js";import{X as _}from"./x-DzxOueU7.js";import{U as T}from"./upload-OOuhAMtj.js";import"./createLucideIcon-B0FBwDqt.js";const q={class:"w-full max-w-3xl rounded-xl border border-sidebar-border bg-card shadow-xl overflow-hidden"},I={class:"flex items-center justify-between border-b border-sidebar-border px-6 py-4"},L={class:"text-xl font-semibold text-foreground"},R={class:"space-y-4"},z={class:"flex items-center gap-4"},P={class:"flex-1"},$={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},O={class:"flex items-center gap-4"},X={class:"flex-1"},G={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},H={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},J={class:"space-y-2"},K={key:0,class:"grid grid-cols-2 gap-2"},Q=["src","alt"],W=["title"],Y={key:1,for:"images",class:"flex cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-sidebar-border bg-muted/30 px-4 py-6 text-sm text-muted-foreground transition-colors hover:border-primary hover:bg-muted/50"},Z={key:2,class:"relative rounded-lg border border-sidebar-border p-2"},B=["src"],ee={key:3,class:"text-xs text-muted-foreground"},te={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},re={class:"flex items-center gap-3"},oe={class:"mt-5 flex justify-end gap-3"},se=["disabled"],le=["disabled"],ue={__name:"BlogModal",props:{show:{type:Boolean,required:!0},blog:{type:Object,default:null}},emits:["close"],setup(h,{emit:C}){const m=h,f=C,b=E(()=>!!m.blog),i=k(null),c=k([]),t=D({title:"",slug:"",details:"",tags:"",date:"",images:null,active:!0});v(()=>m.blog,l=>{l?(t.title=l.title,t.slug=l.slug,t.details=l.details||"",t.tags=l.tags?l.tags.join(", "):"",t.date=l.date||"",t.active=l.active,t.images=null,i.value=null,c.value=l.media||[]):(t.reset(),i.value=null,c.value=[])},{immediate:!0}),v(()=>m.show,l=>{l||(t.reset(),t.clearErrors(),i.value=null)}),v(()=>t.title,l=>{b.value||(t.slug=l.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const U=l=>{const r=l.target.files;if(r&&r.length>0){t.images=Array.from(r);const s=new FileReader;s.onload=S=>{i.value=S.target?.result},s.readAsDataURL(r[0])}},V=()=>{t.images=null,i.value=null},j=()=>{b.value&&m.blog?t.put(`/admin/blogs/${m.blog.id}`,{preserveScroll:!0,onSuccess:()=>f("close")}):t.post("/admin/blogs",{preserveScroll:!0,onSuccess:()=>f("close")})},x=()=>f("close");return(l,r)=>h.show?(a(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-start justify-center overflow-y-auto bg-black/50 p-6",onClick:w(x,["self"])},[e("div",q,[e("div",I,[e("h2",L,u(b.value?"Edit Blog":"Create Blog"),1),e("button",{onClick:x,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[y(o(_),{class:"h-5 w-5"})])]),e("form",{onSubmit:w(j,["prevent"]),class:"p-6 max-h-[75vh] overflow-y-auto"},[e("div",R,[e("div",z,[r[6]||(r[6]=e("label",{for:"title",class:"w-24 text-sm font-medium text-foreground"},[M(" Title "),e("span",{class:"text-red-500"},"*")],-1)),e("div",P,[g(e("input",{id:"title","onUpdate:modelValue":r[0]||(r[0]=s=>o(t).title=s),type:"text",required:"",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter blog title"},null,512),[[p,o(t).title]]),o(t).errors.title?(a(),d("p",$,u(o(t).errors.title),1)):n("",!0)])]),e("div",O,[r[8]||(r[8]=e("label",{for:"slug",class:"w-24 text-sm font-medium text-foreground"}," Slug ",-1)),e("div",X,[g(e("input",{id:"slug","onUpdate:modelValue":r[1]||(r[1]=s=>o(t).slug=s),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"auto-generated-slug"},null,512),[[p,o(t).slug]]),r[7]||(r[7]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Auto-generated from title if left empty ",-1)),o(t).errors.slug?(a(),d("p",G,u(o(t).errors.slug),1)):n("",!0)])]),e("div",null,[r[9]||(r[9]=e("label",{for:"tags",class:"mb-1.5 block text-sm font-medium text-foreground"}," Tags ",-1)),g(e("input",{id:"tags","onUpdate:modelValue":r[2]||(r[2]=s=>o(t).tags=s),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"tag1, tag2, tag3"},null,512),[[p,o(t).tags]]),r[10]||(r[10]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Separate tags with commas ",-1))]),e("div",null,[r[11]||(r[11]=e("label",{for:"date",class:"mb-1.5 block text-sm font-medium text-foreground"}," Date ",-1)),g(e("input",{id:"date","onUpdate:modelValue":r[3]||(r[3]=s=>o(t).date=s),type:"date",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[p,o(t).date]])]),e("div",null,[r[12]||(r[12]=e("label",{for:"details",class:"mb-1.5 block text-sm font-medium text-foreground"}," Details ",-1)),g(e("textarea",{id:"details","onUpdate:modelValue":r[4]||(r[4]=s=>o(t).details=s),rows:"2",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter blog description"},null,512),[[p,o(t).details]]),o(t).errors.details?(a(),d("p",H,u(o(t).errors.details),1)):n("",!0)]),e("div",null,[r[13]||(r[13]=e("label",{for:"images",class:"mb-1.5 block text-sm font-medium text-foreground"}," Images ",-1)),e("div",J,[c.value.length>0&&!i.value?(a(),d("div",K,[(a(!0),d(A,null,F(c.value,s=>(a(),d("div",{key:s.id,class:"relative rounded-lg border border-sidebar-border p-2"},[e("img",{src:s.url,alt:s.file_name,class:"h-20 w-full rounded object-cover"},null,8,Q),e("p",{class:"mt-1 truncate text-xs text-muted-foreground",title:s.file_name},u(s.file_name),9,W)]))),128))])):n("",!0),i.value?n("",!0):(a(),d("label",Y,[y(o(T),{class:"h-4 w-4"}),e("span",null,u(c.value.length>0?"Replace images":"Click to upload images"),1),e("input",{id:"images",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:U},null,32)])),i.value?(a(),d("div",Z,[e("img",{src:i.value,alt:"Preview",class:"h-24 w-full rounded object-cover"},null,8,B),e("button",{type:"button",onClick:V,class:"absolute right-3 top-3 rounded-full bg-red-600 p-1 text-white shadow-lg transition-colors hover:bg-red-700"},[y(o(_),{class:"h-3 w-3"})])])):n("",!0),c.value.length>0&&!i.value?(a(),d("p",ee," Uploading new images will replace all existing images ")):n("",!0)]),o(t).errors.images?(a(),d("p",te,u(o(t).errors.images),1)):n("",!0)]),e("div",re,[g(e("input",{id:"active","onUpdate:modelValue":r[5]||(r[5]=s=>o(t).active=s),type:"checkbox",class:"h-4 w-4 rounded border-sidebar-border text-primary focus:ring-2 focus:ring-primary/20"},null,512),[[N,o(t).active]]),r[14]||(r[14]=e("label",{for:"active",class:"text-sm font-medium text-foreground"}," Active ",-1))])]),e("div",oe,[e("button",{type:"button",onClick:x,class:"rounded-lg border border-sidebar-border px-4 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-muted",disabled:o(t).processing}," Cancel ",8,se),e("button",{type:"submit",class:"rounded-lg bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",disabled:o(t).processing},u(o(t).processing?"Saving...":b.value?"Update":"Create"),9,le)])],32)])])):n("",!0)}};export{ue as default};
