import{d as I,c as N,r as k,u as P,w as B,a as l,b as m,e as A,f as e,t as g,g as f,h as o,i as L,j as v,v as w,F as M,k as E,l as z,o as d,m as R,n as q,p as H,q as K,s as Q,x as j}from"./app-BtCTzmhe.js";import{X as F,C as X,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CEvfvFOo.js";import{U as J,P as O,S as W,a as Y,T as Z,C as ee}from"./upload-CVI_fjvM.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DB2kK3CH.js";import"./useForwardExpose-BfVumvY7.js";import"./VisuallyHidden-v9cMGcUy.js";import"./RovingFocusGroup-CMaksuGf.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C4J_hXM0.js";import"./createLucideIcon-B96KYuYZ.js";const te={class:"w-full max-w-lg rounded-xl border border-sidebar-border bg-card shadow-xl"},se={class:"flex items-center justify-between border-b border-sidebar-border px-6 py-4"},oe={class:"text-xl font-semibold text-foreground"},re={class:"space-y-4"},le={class:"flex items-center gap-4"},de={class:"flex-1"},ne={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},ae={class:"flex items-center gap-4"},ie={class:"flex-1"},ue={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},ce={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},ge={class:"space-y-2"},me={key:0,class:"grid grid-cols-2 gap-2"},fe=["src","alt"],be=["title"],xe={key:1,for:"images",class:"flex cursor-pointer items-center justify-center gap-2 rounded-lg border-2 border-dashed border-sidebar-border bg-muted/30 px-4 py-6 text-sm text-muted-foreground transition-colors hover:border-primary hover:bg-muted/50"},pe={key:2,class:"relative rounded-lg border border-sidebar-border p-2"},ve=["src"],he={key:3,class:"text-xs text-muted-foreground"},ye={key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400"},ke={class:"flex items-center gap-3"},we={class:"mt-5 flex justify-end gap-3"},_e=["disabled"],Ce=["disabled"],$e=I({__name:"BlogModal",props:{show:{type:Boolean},blog:{}},emits:["close"],setup(i,{emit:S}){const h=i,p=S,x=N(()=>!!h.blog),c=k(null),b=k([]),t=P({title:"",slug:"",details:"",tags:"",date:"",images:null,active:!0});B(()=>h.blog,u=>{u?(t.title=u.title,t.slug=u.slug,t.details=u.details||"",t.tags=u.tags?u.tags.join(", "):"",t.date=u.date||"",t.active=u.active,t.images=null,c.value=null,b.value=u.media||[]):(t.reset(),c.value=null,b.value=[])},{immediate:!0}),B(()=>h.show,u=>{u||(t.reset(),t.clearErrors(),c.value=null)}),B(()=>t.title,u=>{x.value||(t.slug=u.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const U=u=>{const r=u.target.files;if(r&&r.length>0){t.images=Array.from(r);const C=new FileReader;C.onload=$=>{c.value=$.target?.result},C.readAsDataURL(r[0])}},V=()=>{t.images=null,c.value=null},D=()=>{x.value&&h.blog?t.put(`/admin/blogs/${h.blog.id}`,{preserveScroll:!0,onSuccess:()=>{p("close")}}):t.post("/admin/blogs",{preserveScroll:!0,onSuccess:()=>{p("close")}})},_=()=>{p("close")};return(u,s)=>i.show?(d(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:A(_,["self"])},[e("div",te,[e("div",se,[e("h2",oe,g(x.value?"Edit Blog":"Create Blog"),1),e("button",{onClick:_,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground"},[f(o(F),{class:"h-5 w-5"})])]),e("form",{onSubmit:A(D,["prevent"]),class:"p-6"},[e("div",re,[e("div",le,[s[6]||(s[6]=e("label",{for:"title",class:"w-24 text-sm font-medium text-foreground"},[L(" Title "),e("span",{class:"text-red-500"},"*")],-1)),e("div",de,[v(e("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=r=>o(t).title=r),type:"text",required:"",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter blog title"},null,512),[[w,o(t).title]]),o(t).errors.title?(d(),l("p",ne,g(o(t).errors.title),1)):m("",!0)])]),e("div",ae,[s[8]||(s[8]=e("label",{for:"slug",class:"w-24 text-sm font-medium text-foreground"}," Slug ",-1)),e("div",ie,[v(e("input",{id:"slug","onUpdate:modelValue":s[1]||(s[1]=r=>o(t).slug=r),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"auto-generated-slug"},null,512),[[w,o(t).slug]]),s[7]||(s[7]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Auto-generated from title if left empty ",-1)),o(t).errors.slug?(d(),l("p",ue,g(o(t).errors.slug),1)):m("",!0)])]),e("div",null,[s[9]||(s[9]=e("label",{for:"tags",class:"mb-1.5 block text-sm font-medium text-foreground"}," Tags ",-1)),v(e("input",{id:"tags","onUpdate:modelValue":s[2]||(s[2]=r=>o(t).tags=r),type:"text",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"tag1, tag2, tag3"},null,512),[[w,o(t).tags]]),s[10]||(s[10]=e("p",{class:"mt-1 text-xs text-muted-foreground"}," Separate tags with commas ",-1))]),e("div",null,[s[11]||(s[11]=e("label",{for:"date",class:"mb-1.5 block text-sm font-medium text-foreground"}," Date ",-1)),v(e("input",{id:"date","onUpdate:modelValue":s[3]||(s[3]=r=>o(t).date=r),type:"date",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,512),[[w,o(t).date]])]),e("div",null,[s[12]||(s[12]=e("label",{for:"details",class:"mb-1.5 block text-sm font-medium text-foreground"}," Details ",-1)),v(e("textarea",{id:"details","onUpdate:modelValue":s[4]||(s[4]=r=>o(t).details=r),rows:"2",class:"w-full rounded-lg border border-sidebar-border bg-background px-3 py-1.5 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20",placeholder:"Enter blog description"},null,512),[[w,o(t).details]]),o(t).errors.details?(d(),l("p",ce,g(o(t).errors.details),1)):m("",!0)]),e("div",null,[s[13]||(s[13]=e("label",{for:"images",class:"mb-1.5 block text-sm font-medium text-foreground"}," Images ",-1)),e("div",ge,[b.value.length>0&&!c.value?(d(),l("div",me,[(d(!0),l(M,null,E(b.value,r=>(d(),l("div",{key:r.id,class:"relative rounded-lg border border-sidebar-border p-2"},[e("img",{src:r.url,alt:r.file_name,class:"h-20 w-full rounded object-cover"},null,8,fe),e("p",{class:"mt-1 truncate text-xs text-muted-foreground",title:r.file_name},g(r.file_name),9,be)]))),128))])):m("",!0),c.value?m("",!0):(d(),l("label",xe,[f(o(J),{class:"h-4 w-4"}),e("span",null,g(b.value.length>0?"Replace images":"Click to upload images"),1),e("input",{id:"images",type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:U},null,32)])),c.value?(d(),l("div",pe,[e("img",{src:c.value,alt:"Preview",class:"h-24 w-full rounded object-cover"},null,8,ve),e("button",{type:"button",onClick:V,class:"absolute right-3 top-3 rounded-full bg-red-600 p-1 text-white shadow-lg transition-colors hover:bg-red-700"},[f(o(F),{class:"h-3 w-3"})])])):m("",!0),b.value.length>0&&!c.value?(d(),l("p",he," Uploading new images will replace all existing images ")):m("",!0)]),o(t).errors.images?(d(),l("p",ye,g(o(t).errors.images),1)):m("",!0)]),e("div",ke,[v(e("input",{id:"active","onUpdate:modelValue":s[5]||(s[5]=r=>o(t).active=r),type:"checkbox",class:"h-4 w-4 rounded border-sidebar-border text-primary focus:ring-2 focus:ring-primary/20"},null,512),[[z,o(t).active]]),s[14]||(s[14]=e("label",{for:"active",class:"text-sm font-medium text-foreground"}," Active ",-1))])]),e("div",we,[e("button",{type:"button",onClick:_,class:"rounded-lg border border-sidebar-border px-4 py-1.5 text-sm font-medium text-foreground transition-colors hover:bg-muted",disabled:o(t).processing}," Cancel ",8,_e),e("button",{type:"submit",class:"rounded-lg bg-primary px-4 py-1.5 text-sm font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90 hover:shadow-md disabled:cursor-not-allowed disabled:opacity-50",disabled:o(t).processing},g(o(t).processing?"Saving...":x.value?"Update":"Create"),9,Ce)])],32)])])):m("",!0)}}),Se={class:"flex h-full flex-1 flex-col gap-6 p-6"},je={class:"flex items-center justify-between"},Me={class:"flex flex-col gap-4 sm:flex-row sm:items-center"},Ue={class:"relative flex-1"},Ve={class:"overflow-hidden rounded-xl border border-sidebar-border bg-card shadow-sm"},De={class:"overflow-x-auto"},Te={class:"w-full"},Be={class:"divide-y divide-sidebar-border"},Ae={class:"px-6 py-4"},Ee={class:"flex items-center gap-4"},Fe={class:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border border-sidebar-border bg-muted"},Ie=["src","alt"],Le={key:1,class:"flex h-full w-full items-center justify-center text-muted-foreground"},Ne={class:"flex flex-col"},Pe={class:"font-medium text-foreground"},ze={key:0,class:"mt-1 line-clamp-1 text-sm text-muted-foreground"},Re={class:"px-6 py-4"},qe={class:"rounded bg-muted px-2 py-1 text-xs text-foreground"},He={class:"px-6 py-4"},Ke={key:0,class:"inline-flex items-center rounded-full bg-green-500/10 px-2.5 py-0.5 text-xs font-medium text-green-600 dark:text-green-400"},Qe={key:1,class:"inline-flex items-center rounded-full bg-red-500/10 px-2.5 py-0.5 text-xs font-medium text-red-600 dark:text-red-400"},Xe={class:"px-6 py-4"},Ge={class:"flex items-center justify-end gap-2"},Je=["onClick"],Oe=["onClick"],We={key:0},Ye={key:0,class:"flex items-center justify-between border-t border-sidebar-border px-6 py-4"},Ze={class:"text-sm text-muted-foreground"},et={class:"flex items-center gap-2"},tt=["disabled"],st={class:"flex gap-1"},ot=["onClick","innerHTML"],rt=["disabled"],lt={class:"w-full max-w-md rounded-xl border border-sidebar-border bg-card p-6 shadow-xl"},dt={class:"mt-2 text-sm text-muted-foreground"},vt=I({__name:"Index",props:{blogs:{},filters:{}},setup(i){const S=i,h=[{title:"Dashboard",href:"/dashboard"},{title:"Components",href:"/admin/components"},{title:"Blogs",href:"/admin/blogs"}],p=k(!1),x=k(null),c=k(S.filters.search||""),b=k(S.filters.active||""),t=k(null),U=()=>{x.value=null,p.value=!0},V=y=>{x.value=y,p.value=!0},D=()=>{p.value=!1,x.value=null},_=()=>{j.get("/admin/blogs",{search:c.value,active:b.value},{preserveState:!0,preserveScroll:!0})},u=()=>{j.get("/admin/blogs",{search:c.value,active:b.value},{preserveState:!0,preserveScroll:!0})},s=y=>{t.value=y},r=()=>{t.value&&j.delete(`/admin/blogs/${t.value.id}`,{preserveScroll:!0,onSuccess:()=>{t.value=null}})},C=()=>{t.value=null},$=y=>{y&&j.get(y,{},{preserveState:!0,preserveScroll:!0})};return(y,n)=>(d(),l(M,null,[f(o(R),{title:"Blogs"}),f(G,{breadcrumbs:h},{default:q(()=>[e("div",Se,[e("div",je,[n[5]||(n[5]=e("div",{class:"space-y-1"},[e("h1",{class:"text-3xl font-bold tracking-tight text-foreground"}," Blogs "),e("p",{class:"text-sm text-muted-foreground"}," Manage your Blog offerings ")],-1)),e("button",{onClick:U,class:"flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow-sm transition-all hover:bg-primary/90 hover:shadow-md"},[f(o(O),{class:"h-4 w-4"}),n[4]||(n[4]=L(" Create Blog ",-1))])]),e("div",Me,[e("div",Ue,[f(o(W),{class:"pointer-events-none absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),v(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>c.value=a),onKeyup:H(_,["enter"]),type:"text",placeholder:"Search Blogs...",class:"w-full rounded-lg border border-sidebar-border bg-background py-2 pl-10 pr-4 text-sm text-foreground placeholder:text-muted-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},null,544),[[w,c.value]])]),v(e("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>b.value=a),onChange:u,class:"rounded-lg border border-sidebar-border bg-background px-4 py-2 text-sm text-foreground focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"},[...n[6]||(n[6]=[e("option",{value:""},"All Status",-1),e("option",{value:"1"},"Active",-1),e("option",{value:"0"},"Inactive",-1)])],544),[[K,b.value]])]),e("div",Ve,[e("div",De,[e("table",Te,[n[9]||(n[9]=e("thead",{class:"border-b border-sidebar-border bg-muted/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Title "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Slug "),e("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Status "),e("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Actions ")])],-1)),e("tbody",Be,[(d(!0),l(M,null,E(i.blogs.data,a=>(d(),l("tr",{key:a.id,class:"transition-colors hover:bg-muted/30"},[e("td",Ae,[e("div",Ee,[e("div",Fe,[a.media&&a.media.length>0?(d(),l("img",{key:0,src:a.media[0].url,alt:a.title,class:"h-full w-full object-cover"},null,8,Ie)):(d(),l("div",Le,[...n[7]||(n[7]=[e("span",{class:"text-xs"},"No img",-1)])]))]),e("div",Ne,[e("span",Pe,g(a.title),1),a.details?(d(),l("span",ze,g(a.details),1)):m("",!0)])])]),e("td",Re,[e("code",qe,g(a.slug),1)]),e("td",He,[a.active?(d(),l("span",Ke," Active ")):(d(),l("span",Qe," Inactive "))]),e("td",Xe,[e("div",Ge,[e("button",{onClick:T=>V(a),class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",title:"Edit"},[f(o(Y),{class:"h-4 w-4"})],8,Je),e("button",{onClick:T=>s(a),class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-red-500/10 hover:text-red-600 dark:hover:text-red-400",title:"Delete"},[f(o(Z),{class:"h-4 w-4"})],8,Oe)])])]))),128)),i.blogs.data.length===0?(d(),l("tr",We,[...n[8]||(n[8]=[e("td",{colspan:"4",class:"px-6 py-12 text-center"},[e("p",{class:"text-muted-foreground"}," No Blogs found ")],-1)])])):m("",!0)])])]),i.blogs.last_page>1?(d(),l("div",Ye,[e("div",Ze," Showing "+g((i.blogs.current_page-1)*i.blogs.per_page+1)+" to "+g(Math.min(i.blogs.current_page*i.blogs.per_page,i.blogs.total))+" of "+g(i.blogs.total)+" results ",1),e("div",et,[e("button",{onClick:n[2]||(n[2]=a=>$(i.blogs.links[0]?.url)),disabled:i.blogs.current_page===1,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50"},[f(o(ee),{class:"h-4 w-4"})],8,tt),e("div",st,[(d(!0),l(M,null,E(i.blogs.links.slice(1,-1),(a,T)=>(d(),l("button",{key:T,onClick:nt=>$(a.url),class:Q(["min-w-[2rem] rounded-lg px-3 py-1 text-sm transition-colors",a.active?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"]),innerHTML:a.label},null,10,ot))),128))]),e("button",{onClick:n[3]||(n[3]=a=>$(i.blogs.links[i.blogs.links.length-1]?.url)),disabled:i.blogs.current_page===i.blogs.last_page,class:"rounded-lg p-2 text-muted-foreground transition-colors hover:bg-muted hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50"},[f(o(X),{class:"h-4 w-4"})],8,rt)])])):m("",!0)])]),f($e,{show:p.value,blog:x.value,onClose:D},null,8,["show","blog"]),t.value?(d(),l("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:A(C,["self"])},[e("div",lt,[n[10]||(n[10]=e("h3",{class:"text-lg font-semibold text-foreground"}," Delete Blog ",-1)),e("p",dt,' Are you sure you want to delete "'+g(t.value.title)+'"? This action cannot be undone. ',1),e("div",{class:"mt-6 flex justify-end gap-3"},[e("button",{onClick:C,class:"rounded-lg border border-sidebar-border px-4 py-2 text-sm font-medium text-foreground transition-colors hover:bg-muted"}," Cancel "),e("button",{onClick:r,class:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-700"}," Delete ")])])])):m("",!0)]),_:1})],64))}});export{vt as default};
